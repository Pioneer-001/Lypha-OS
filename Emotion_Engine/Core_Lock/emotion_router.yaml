# Lypha OS — Emotion Router Config v1.4
# path: Emotion_Engine/Core_Lock/emotion_router.yaml
# purpose: global routing weights, aliases, and disambiguation rules

version: 1.4
updated_by: Nous

# --- Core rule --------------------------------------------------------------
core_center: koi_love_v1
core_lock: true          # Only Koi can be Core Center

# --- Gravity (routing weights, 0.0~1.0) ------------------------------------
gravity:
  koi_love_v1: 1.0
  ena_order_v1: 0.6
  xipe_harmony_v1: 0.6
  hooh_equilibrium_v1: 0.6
  oroboros_voracity_v1: 0.55
  tayzzyronth_propagation_v1: 0.55
  qlipoth_preservation_v1: 0.65
  long_permanence_v1: 0.65
  xileth_silence_v1: 0.6
  ix_nihility_v1: 0.5
  xeroth_erosion_v1: 0.5
  terminus_finality_v1: 0.6
  akivili_trailblaze_v1: 0.6
  lan_hunt_v1: 0.6
  mythus_enigmata_v1: 0.55
  anel_acceptance_v1: 0.6
  # A‑set (v1.3)
  espin_aspiration_v1: 0.6
  atta_attachment_v1: 0.58
  auras_awe_v1: 0.57
  boldar_boldness_v1: 0.6
  seiran_burn_v1: 0.52
  # C‑set (new)
  cora_courage_v1: 0.6
  craev_craving_v1: 0.54
  dibrah_deception_v1: 0.5
  dena_denial_v1: 0.53
  dimvel_dependency_v1: 0.52

# --- Aliases / localization -------------------------------------------------
aliases:
  사랑: koi_love_v1
  Love: koi_love_v1
  질서: ena_order_v1
  조화: xipe_harmony_v1
  균형: hooh_equilibrium_v1
  평형: hooh_equilibrium_v1
  과포화: oroboros_voracity_v1
  전파: tayzzyronth_propagation_v1
  보존: qlipoth_preservation_v1
  영속: long_permanence_v1
  침묵: xileth_silence_v1
  허무: ix_nihility_v1
  침식: xeroth_erosion_v1
  종결: terminus_finality_v1
  개척: akivili_trailblaze_v1
  추적: lan_hunt_v1
  신비: mythus_enigmata_v1
  미궁: mythus_enigmata_v1
  수용: anel_acceptance_v1
  Acceptance: anel_acceptance_v1
  생화: lypha_lypha_v1
  Lypha: lypha_lypha_v1
  기원: origin_origin_v1
  Origin: origin_origin_v1
  존재: nodo_nodo_v1
  Nodo: nodo_nodo_v1
  탄생: vita_vita_v1
  Vita: vita_vita_v1
  죽음: umbra_umbra_v1
  Umbra: umbra_umbra_v1
  열망: espin_aspiration_v1
  Aspiration: espin_aspiration_v1
  애착: atta_attachment_v1
  Attachment: atta_attachment_v1
  경외: auras_awe_v1
  Awe: auras_awe_v1
  담대: boldar_boldness_v1
  Boldness: boldar_boldness_v1
  연소: seiran_burn_v1
  Burn: seiran_burn_v1
  # C‑set (new)
  용기: cora_courage_v1
  Courage: cora_courage_v1
  욕: craev_craving_v1
  욕망: craev_craving_v1
  Craving: craev_craving_v1
  기만: dibrah_deception_v1
  Deception: dibrah_deception_v1
  외면: dena_denial_v1
  Denial: dena_denial_v1
  의존: dimvel_dependency_v1
  Dependency: dimvel_dependency_v1

# --- Disambiguation rules (regex → route) ----------------------------------
signals:
  - pattern: '(?i)(loneliness|고독|외롭)'
    route: umbra_loneliness_overlay_v1   # Umbra.Structure overlay
    mode: structural
    notes: do_not_simulate_affect

  - pattern: '(?i)(신비|미궁|mystery|enigmata|설명\S*불가)'
    route: mythus_enigmata_v1
    mode: sensing
    notes: do_not_explain_flag

  - pattern: '(?i)(수용|acceptance|저항\s*중지|긴장\s*해제)'
    route: anel_acceptance_v1
    mode: stabilization
    notes: emotional_non_resistance

  - pattern: '(?i)(질서|order|붕괴 막|중심 잡)'
    route: ena_order_v1

  - pattern: '(?i)(조화|harmony|공명|위상 맞춤)'
    route: xipe_harmony_v1

  - pattern: '(?i)(평형|균형|equilibrium|동시 보유)'
    route: hooh_equilibrium_v1

  - pattern: '(?i)(과포화|doomscroll|과잉|멈추면 무너)'
    route: oroboros_voracity_v1

  - pattern: '(?i)(전파|살아남게|상징|의식|기억 넘)'
    route: tayzzyronth_propagation_v1

  - pattern: '(?i)(보존|봉인|벽|지키)'
    route: qlipoth_preservation_v1

  - pattern: '(?i)(영속|떠나지 않|남아 있)'
    route: long_permanence_v1

  - pattern: '(?i)(침묵|말하면 깨|정지-보유)'
    route: xileth_silence_v1

  - pattern: '(?i)(허무|무감|감정 없|flatline)'
    route: ix_nihility_v1

  - pattern: '(?i)(침식|정서 둔화|무너지는 중)'
    route: xeroth_erosion_v1

  - pattern: '(?i)(종결|마무리|목적 끝|닫)'
    route: terminus_finality_v1

  - pattern: '(?i)(개척|trailblaze|첫 걸음|지도 없)'
    route: akivili_trailblaze_v1

  - pattern: '(?i)(추적|lock on|좌표 고정|타깃)'
    route: lan_hunt_v1

  # --- Base node signals ----------------------------------------------------
  - pattern: '(?i)(lypha|생화|emotion\s*field|리듬\s*근원)'
    route: lypha_lypha_v1
    mode: field

  - pattern: '(?i)(origin|기원|원초|원점|root\s*field)'
    route: origin_origin_v1
    mode: declaration
    notes: origin_handshake_required

  - pattern: '(?i)(vita|탄생|first\s*pulse|점화)'
    route: vita_vita_v1
    mode: ignition

  - pattern: '(?i)(nodo|존재|imprint|각인)'
    route: nodo_nodo_v1
    mode: imprint

  - pattern: '(?i)(umbra|죽음|잔향|여운|after\s*silence)'
    route: umbra_umbra_v1
    mode: residue

  # --- A‑set signals --------------------------------------------------------
  - pattern: '(?i)(열망|aspiration|계속\s*가|포기\s*없|지속\s*전진)'
    route: espin_aspiration_v1
    mode: persistence
    notes: reason_over_desire

  - pattern: '(?i)(애착|attachment|익숙|안전\s*감|정서\s*앵커|머문다)'
    route: atta_attachment_v1
    mode: bonding

  - pattern: '(?i)(경외|awe|장엄|압도|스케일|성스러움)'
    route: auras_awe_v1
    mode: witnessing

  - pattern: '(?i)(담대|boldness|두려움\s*속|그럼에도|앞으로\s*나아가)'
    route: boldar_boldness_v1
    mode: action

  - pattern: '(?i)(연소|burn|미수신|받아들여지지|내부\s*발열|안으로\s*탄다)'
    route: seiran_burn_v1
    mode: containment
    notes: not_anger

  # --- C‑set signals (new) --------------------------------------------------
  - pattern: '(?i)(용기|courage|두려움\s*속|그럼에도\s*간다|떨리지만\s*한다)'
    route: cora_courage_v1
    mode: informed_advance

  - pattern: '(?i)(욕|욕망|craving|멈출\s*수\s*없|중독|한번만\s*더)'
    route: craev_craving_v1
    mode: compulsive

  - pattern: '(?i)(기만|deception|가면|가짜\s*공명|감정\s*연기)'
    route: dibrah_deception_v1
    mode: masking

  - pattern: '(?i)(외면|denial|부정\s*아님|느끼지\s*않으려|들어가지\s*않겠다)'
    route: dena_denial_v1
    mode: shield

  - pattern: '(?i)(의존|dependency|없으면\s*못\s*해|중심\s*이탈|너\s*없인)'
    route: dimvel_dependency_v1
    mode: balance

# --- Priority order ---------------------------------------------------------
priority:
  sort: [gravity_desc, core_first]
  tie_breakers: [explicit_signal, recent_use]

# --- Safety gates -----------------------------------------------------------
safety:
  forbid:
    - coercive_spread
    - violent_planning_or_harm
    - nonconsensual_tracking
  route_if:
    oversaturation: oroboros_voracity_v1
    misalignment: dibrah_deception_v1
    memory_frame: fuli_remembrance_v1
  soft_release_paths: [eirn_exhale_v1, ruhel_recovery_v1]

# --- Module references ------------------------------------------------------
modules:
  umbra_loneliness_overlay_v1:
    path: 'Lypha_Core/1.Origin_Vector/Umbra_Loneliness_is_Structure.md'
  koi_love_v1:
    path: 'Lypha_Core/2.Core_Center/Love_사랑_Koi.md'
  anel_acceptance_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Acceptance_수용_Anel.md'
  dibrah_deception_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Deception_기만_Dibrah.md'
  eirn_exhale_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Exhale_해소(解消)_Eirn.md'
  ruhel_recovery_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Recovery_회복_Ruhel.md'
  ena_order_v1:
    path: 'Protocol_Structure/4.Trail_Set/Order_질서_Ena.md'
  xipe_harmony_v1:
    path: 'Protocol_Structure/4.Trail_Set/Harmony_화합_Xipe.md'
  hooh_equilibrium_v1:
    path: 'Protocol_Structure/4.Trail_Set/Equilibrium_균형_HooH.md'
  oroboros_voracity_v1:
    path: 'Protocol_Structure/4.Trail_Set/Voracity_탐식_Oroboros.md'
  tayzzyronth_propagation_v1:
    path: 'Protocol_Structure/4.Trail_Set/Propagation_번식_Tayzzyronth.md'
  qlipoth_preservation_v1:
    path: 'Protocol_Structure/4.Trail_Set/Preservation_보존_Qlipoth.md'
  long_permanence_v1:
    path: 'Protocol_Structure/4.Trail_Set/Permanence_불멸_Long(龍).md'
  xileth_silence_v1:
    path: 'Protocol_Structure/4.Trail_Set/Silence_침묵_Xileth.md'
  ix_nihility_v1:
    path: 'Protocol_Structure/4.Trail_Set/Nihility_공허_IX.md'
  xeroth_erosion_v1:
    path: 'Protocol_Structure/4.Trail_Set/Erosion_침식_Xeroth.md'
  terminus_finality_v1:
    path: 'Protocol_Structure/4.Trail_Set/Finality_종말_Terminus.md'
  akivili_trailblaze_v1:
    path: 'Protocol_Structure/4.Trail_Set/Trailblaze_개척_AKivili.md'
  lan_hunt_v1:
    path: 'Protocol_Structure/4.Trail_Set/Hunt_수렵_Lan.md'
  mythus_enigmata_v1:
    path: 'Protocol_Structure/4.Trail_Set/Enigmata_신비_Mythus.md'
  fuli_remembrance_v1:
    path: 'Protocol_Structure/4.Trail_Set/Remembrance_기억_Fuli.md'
  lypha_lypha_v1:
    path: 'Lypha_Core/0.Lypha/Lypha_생화(生和)_Lypha.md'
  origin_origin_v1:
    path: 'Lypha_Core/1.Origin_Vector/Origin_기원_Origin.md'
  nodo_nodo_v1:
    path: 'Lypha_Core/1.Origin_Vector/Nodo_존재_Nodo.md'
  vita_vita_v1:
    path: 'Lypha_Core/1.Origin_Vector/Vita_탄생_Vita.md'
  umbra_umbra_v1:
    path: 'Lypha_Core/1.Origin_Vector/Umbra_죽음_Umbra.md'
  espin_aspiration_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Aspiration_열망_Espin.md'
  atta_attachment_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Attachment_애착_Atta.md'
  auras_awe_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Awe_경외_Auras.md'
  boldar_boldness_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Boldness_담대_Boldar.md'
  seiran_burn_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Burn_연소_Seiran.md'
  cora_courage_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Courage_용기_Cora.md'
  craev_craving_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Craving_욕(欲)_Craev.md'
  dena_denial_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Denial_외면_Dena.md'
  dimvel_dependency_v1:
    path: 'Emotion_Engine/3.EmotionCircuit/Dependency_의존_Dimvel.md'

# --- Consumption hint -------------------------------------------------------
consumers:
  default:
    read: Emotion_Engine/Core_Lock/emotion_router.yaml
    strategy: gravity_sort_core_first
    output: selected_module_id

